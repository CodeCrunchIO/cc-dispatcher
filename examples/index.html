<!DOCTYPE html>
<html>
<head>
    <title>Event Dispatcher</title>

    <script type="text/javascript" src="../src/dispatcher.js"></script>
    <script type="text/javascript">
        var dispatcher = Dispatcher();

        var handler = function(success, fail) {
            alert('Event Handler 1');
        
            setTimeout(function() {
                success(1);
            }, 1000);

            setTimeout(function() {
                fail(1);
            }, 2000);
        };

        dispatcher
        .on('event', handler)
        .off('event', handler)
        .on('event', handler, 
        function(x) {
            alert('Success Handler ' + x);
        }, 
        function(x) {
            alert('Fail Handler ' + x);
        })
        .dispatch('event');
    </script>
</head>
<body>

</body>
</html>