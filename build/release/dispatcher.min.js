!function(){"use strict";var e=function(){return this instanceof e?this:new e},r=e.prototype;r.guid=1,r.observers={},r.noop=function(){},r.on=function(){var e=Array.prototype.slice.apply(arguments),t=!1,s=e.shift(),n=e.shift(),o=e.shift(),f=e.shift();if(n="function"==typeof n?n:this.noop,!s||"string"!=typeof s)return this;"boolean"==typeof o&&(t=o,o=f,f=e.shift()),n=i(n);n._guid;s in this.observers||(this.observers[s]=[]);var u={fn:n,s:"undefined"!=typeof o?o:r.noop,f:"undefined"!=typeof f?f:r.noop};return t?(this.observers[s].unshift(u),this):(this.observers[s].push(u),this)},r.off=function(e,r){if(!e||"string"!=typeof e)return this;if(!(e in this.observers))return this;if("undefined"!=typeof r&&"undefined"!=typeof r._guid){var i=t(e,r._guid);if(0===i.length)return this;for(var s in i)delete this.observers[e][s];return this}return delete this.observers[e],this},r.dispatch=function(){var e=Array.prototype.slice.apply(arguments),r=e.shift();if(!r||"string"!=typeof r)return this;if(!(r in this.observers))return this;for(var t in this.observers[r]){var i=this.observers[r][t].fn,s=[];for(var n in e)s[n]=e[n];s.push(this.observers[r][t].s),s.push(this.observers[r][t].f),i.apply(i,s)}return delete this.observers[r],this};var t=function(e,t){var i=[];if(!(e in r.observers))return i;if("[object Array]"!==toString.call(r.observers[e]))return i;for(var s in r.observers[e]){var n=r.observers[e][s],o=n.fn._guid;"undefined"!=typeof o&&o===t&&(i[s]=n)}return i},i=function(e){return"undefined"==typeof e._guid&&Object.defineProperty(e,"_guid",{value:r.guid++,enumerable:!1,writable:!1}),e};"function"==typeof define&&define.amd&&define("Dispatcher",[],function(){return e}),"undefined"==typeof window.Dispatcher&&(window.Dispatcher=e)}();